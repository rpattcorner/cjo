{
        "name": "cjo-pool",
        "ssh_user": "ubuntu",
        "min-size": 1,
        "max-size": 1,
        "wait_for_nodes":1,
         "run_list": [
                "recipe[cjo_site]" 
        ],
    "static_ip": {
                "ip": "<%= $target_ip_lin %>",
                "assign_ip": true
                },
                "zones": [
                        "us-east-1c",
                        "us-east-1d"
                ],

    "add_firewall_rules": [
        {
            "rule_name":"cjo-portal_secgroup"
        }
    ],


    "vpc": {
        "vpc_id": "<%= ENV['VPCID'] %>",
        "subnets" : [
            {"subnet_id": "<%= ENV['TARGET_PUBLIC_SUBNET'] %>"}
        ]

    },

    "dependencies": [
    {
            "name": "cjo-db",
            "type": "database"
    }
    ],

    "basis": {
            "launch-config": {
                    "name": "cjo",
                    <%= CAP::Config.include("amis/webportal_ami.json") %>,
                    "size": "t2.micro",
                    "iam-role": "cjo_node_role"

            }
    }
}
